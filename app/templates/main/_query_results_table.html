{% if projects %}
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Project Name</th>
                <th>Round</th>
                <th>File #</th>
                <th>Region</th>
                <th>Countries</th>
                <th>Partner Name</th>
                {% for question in selected_questions %}
                <th>{{ question.name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for project in projects %}
            <tr>
                <td>{{ project.name }}</td>
                <td>{{ project.name_of_round }}</td>
                <td>{{ project.file_number_db }}</td>
                <td>{{ project.region }}</td>
                <td>{{ project.countries_covered }}</td>
                <td>{{ project.integrity_partner_name }}</td>
                {% for question in selected_questions %}
                <td>
                    {% set response = project.evaluation_responses|selectattr('question_id', 'equalto', question.id)|first %}
                    {% if response %}
                        {{ response.get_response_text() }}
                    {% else %}
                        <span class="text-muted">No response</span>
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    No projects found matching the current filters.
</div>
{% endif %} 